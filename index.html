<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Convite - Thamires 22 Anos üéÉ</title>

  <!-- Open Graph (thumb do WhatsApp) -->
  <meta property="og:title" content="Convite ‚Äî Thamires 22 Anos üéÉ"/>
  <meta property="og:description" content="Toque para ver o convite completo (com som) üëÄ"/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://convite-thamires.vercel.app"/>
  <meta property="og:image" content="https://convite-thamires.vercel.app/convite_final.png"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="theme-color" content="#000000"/>

  <!-- Fontes -->
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">

  <!-- Preloads -->
  <link rel="preload" as="image" href="/convite_final.png">
  <link rel="preload" as="video" href="/susto.mp4">
  <link rel="preload" as="audio" href="/grito.mp3">

  <style>
    :root { --ctaH: 56px; --blood:#e31919; --bloodGlow:#ff3b3b; }
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{width:100%;height:100%;background:#000;overflow:hidden;display:flex;justify-content:center;align-items:center}

    /* Transi√ß√µes */
    .fade{opacity:1;transition:opacity .28s ease}
    .hidden{opacity:0;pointer-events:none}

    /* Convite (ajustado p/ n√£o ser coberto) */
    #convite{
      max-width:100%;
      max-height:calc(100% - var(--ctaH) - 6px);
      width:auto;height:auto;object-fit:contain;
      display:block;margin:auto;user-select:none;-webkit-user-drag:none
    }

    /* Bot√£o (gatilho) com pulso */
    #msgToque{
      position:fixed;left:0;right:0;bottom:0;height:var(--ctaH);
      display:flex;align-items:center;justify-content:center;
      background:transparent;z-index:5;cursor:pointer;user-select:none
    }
    #msgToque span{
      font-family:"Creepster",system-ui,sans-serif;
      font-size:clamp(.9rem,2.6vw,1.1rem);color:#fff;white-space:nowrap;
      padding:6px 12px;border-radius:10px;background:rgba(0,0,0,.7);
      border:1.5px solid orange;box-shadow:0 0 10px rgba(255,165,0,.75);
      animation:pulsar 1.25s infinite ease-in-out
    }
    @keyframes pulsar{
      0%,100%{transform:scale(1);box-shadow:0 0 10px rgba(255,165,0,.75)}
      50%{transform:scale(1.06);box-shadow:0 0 22px rgba(255,80,0,.9)}
    }

    /* V√≠deo do susto */
    #jumpscare{
      position:fixed;inset:0;width:100%;height:100%;
      object-fit:contain;background:#000;display:none;z-index:10
    }

    /* ===== Tela final (centralizada e com sangue no topo) ===== */
    #endScreen{
      position:fixed;inset:0;display:none;z-index:12;
      background:
        radial-gradient(120% 120% at 50% 100%, rgba(40,0,0,.35) 0%, rgba(0,0,0,.95) 55%, #000 100%),
        #000;
      /* Centraliza√ß√£o perfeita em qualquer celular */
      display:flex;min-height:100vh;min-height:100dvh; /* iOS/Android */
      align-items:center;justify-content:center;
      padding:18px; text-align:center; overflow:hidden; /* p/ sangue n√£o rolar a tela */
    }

    /* Camada decorativa: sangue escorrendo AO FUNDO */
    #endScreen::before{
      content:""; position:absolute; inset:0 0 auto 0; height:26vh;
      background:
        linear-gradient(180deg, rgba(227,25,25,.90) 0%, rgba(227,25,25,.75) 60%, rgba(227,25,25,0) 100%);
      z-index:0; pointer-events:none;
      /* Drips em pseudo m√°scara simples usando gradientes circulares */
      -webkit-mask:
        radial-gradient(18px 22px at 8%   85%, #000 98%, transparent) 0 0 / 120px 60px repeat-x,
        radial-gradient(22px 26px at 28%  88%, #000 98%, transparent) 0 0 / 140px 70px repeat-x,
        radial-gradient(16px 20px at 54%  86%, #000 98%, transparent) 0 0 / 160px 60px repeat-x,
        radial-gradient(20px 24px at 74%  90%, #000 98%, transparent) 0 0 / 130px 70px repeat-x,
        radial-gradient(18px 22px at 92%  87%, #000 98%, transparent) 0 0 / 150px 60px repeat-x;
      mask:
        radial-gradient(18px 22px at 8%   85%, #000 98%, transparent) 0 0 / 120px 60px repeat-x,
        radial-gradient(22px 26px at 28%  88%, #000 98%, transparent) 0 0 / 140px 70px repeat-x,
        radial-gradient(16px 20px at 54%  86%, #000 98%, transparent) 0 0 / 160px 60px repeat-x,
        radial-gradient(20px 24px at 74%  90%, #000 98%, transparent) 0 0 / 130px 70px repeat-x,
        radial-gradient(18px 22px at 92%  87%, #000 98%, transparent) 0 0 / 150px 60px repeat-x;
      animation: dripFloat 4s ease-in-out infinite;
    }
    @keyframes dripFloat{
      0%,100%{ transform: translateY(0px); }
      50%    { transform: translateY(6px); }
    }

    /* Conte√∫do da tela final (fica acima do sangue) */
    .end-wrap{
      position:relative; z-index:1; /* acima do ::before */
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      gap:14px; max-width:min(720px,92vw);
      color:var(--blood); text-shadow:0 0 10px var(--bloodGlow),0 0 22px rgba(227,25,25,.35);
    }
    .end-title{font-family:"Creepster",system-ui,sans-serif;font-size:clamp(1.6rem,6vw,2.4rem);letter-spacing:1px;margin-bottom:2px}
    .end-sub{font-family:"Cinzel",serif;font-weight:700;font-size:clamp(1.1rem,4.5vw,1.5rem)}
    .end-address{font-family:"Cinzel",serif;font-size:clamp(.98rem,4vw,1.25rem);line-height:1.35}

    .divider{
      width:min(220px,72vw);height:2px;
      background:linear-gradient(90deg,transparent,var(--bloodGlow),transparent);
      box-shadow:0 0 16px var(--bloodGlow)
    }

    /* Bot√£o Google Maps ‚Äî tem√°tico */
    .maps-btn{
      margin-top:4px;
      font-family:"Creepster",system-ui,sans-serif;
      font-size:clamp(1rem,3.8vw,1.25rem);
      color:#fff; text-decoration:none;
      padding:10px 16px; border-radius:12px;
      background:linear-gradient(180deg, rgba(90,0,0,.85), rgba(0,0,0,.95));
      border:2px solid var(--blood);
      box-shadow:0 0 14px var(--bloodGlow), inset 0 0 12px rgba(227,25,25,.28);
      display:inline-flex; align-items:center; gap:10px;
      transition:transform .15s ease, box-shadow .15s ease, filter .15s ease;
    }
    .maps-btn::before{ content:"üìç"; filter:drop-shadow(0 0 6px var(--bloodGlow)); }
    .maps-btn:hover{ transform:translateY(-1px); box-shadow:0 0 20px var(--bloodGlow), inset 0 0 14px rgba(227,25,25,.38); filter:brightness(1.08); }
    .maps-btn:active{ transform:translateY(0); }

    @media (max-height:560px){
      :root{--ctaH:50px}
      #msgToque span{font-size:clamp(.85rem,2.8vw,1rem);padding:5px 10px}
      .end-address{line-height:1.28}
    }
  </style>
</head>
<body>
  <!-- Convite -->
  <img id="convite" class="fade" src="convite_final.png" alt="Convite Halloween Thamires" draggable="false"/>

  <!-- Bot√£o que dispara o susto -->
  <div id="msgToque" role="button" tabindex="0" aria-label="Toque para ver o convite completo">
    <span>üéÉ TOQUE AQUI PARA VER O CONVITE COMPLETO üéÉ</span>
  </div>

  <!-- V√≠deo e √°udio -->
  <video id="jumpscare" class="fade hidden" src="susto.mp4" playsinline preload="auto"></video>
  <audio id="audioGrito" src="grito.mp3" preload="auto"></audio>

  <!-- Tela final -->
  <section id="endScreen" class="fade hidden" aria-live="polite">
    <div class="end-wrap">
      <div class="end-title">Local da Festa</div>
      <div class="divider"></div>
      <div class="end-sub">Endere√ßo</div>
      <div class="end-address">Rua 1044, bloco 180, casa 1 ‚Äî Volta Grande 4</div>
      <a class="maps-btn" target="_blank" rel="noopener noreferrer"
         href="https://www.google.com/maps/search/?api=1&query=Rua+1044,+bloco+180,+casa+1+Volta+Grande+4">
        Abrir no Google Maps
      </a>
    </div>
  </section>

  <script>
    const btn      = document.getElementById('msgToque');
    const convite  = document.getElementById('convite');
    const video    = document.getElementById('jumpscare');
    const audio    = document.getElementById('audioGrito');
    const endScr   = document.getElementById('endScreen');

    // helpers de fade
    function show(el){ el.style.display = (el.tagName==='VIDEO' || el.tagName==='SECTION') ? 'block' : 'flex'; requestAnimationFrame(()=>el.classList.remove('hidden')); }
    function hide(el){ el.classList.add('hidden'); setTimeout(()=>{ el.style.display='none'; }, 280); }

    function disparaSusto(){
      hide(btn);
      hide(convite);

      // Prepara e mostra o v√≠deo
      video.currentTime = 0;
      audio.currentTime = 0;
      video.style.display='block';
      requestAnimationFrame(()=> video.classList.remove('hidden'));

      // navigator.vibrate?.([150,70,200]); // (opcional) vibra√ß√£o

      Promise.allSettled([ video.play(), audio.play() ]).finally(()=>{
        let started = false;
        const startTimer = ()=>{
          if(started) return;
          started = true;
          // 2.5s ap√≥s come√ßar a tocar de verdade
          setTimeout(()=> {
            try{ video.pause(); }catch(e){}
            try{ audio.pause(); }catch(e){}
            hide(video);
            show(endScr); // centralizada com sangue decorativo ao fundo
          }, 2500);
        };
        video.addEventListener('playing', startTimer, { once:true });
        setTimeout(startTimer, 1500); // fallback
      });
    }

    btn.addEventListener('click', disparaSusto);
    btn.addEventListener('keydown', e=>{
      if(e.key==='Enter'||e.key===' '){ e.preventDefault(); disparaSusto(); }
    });
  </script>
</body>
</html>
